Author: Paul Wise <pabs@debian.org>
Description: use system libraries instead of embedded code copies
Forwarded: no
Index: warzone2100-3.1.5/configure.ac
===================================================================
--- warzone2100-3.1.5.orig/configure.ac	2016-06-22 00:00:56.000047391 +0200
+++ warzone2100-3.1.5/configure.ac	2016-07-02 21:46:11.289080144 +0200
@@ -382,6 +382,9 @@
 
 # Checks for modules:
 
+
+PKG_CHECK_MODULES([QUESOGLC], [quesoglc])
+
 if test "$backend" = "sdl"; then
 	PKG_CHECK_MODULES([SDL], [sdl >= 1.2])
 fi
@@ -460,8 +463,7 @@
 WZ_CPPFLAGS="${WZ_CPPFLAGS} -I\$(top_srcdir)"
 
 # 3rdparty libs
-WZ_CPPFLAGS="${WZ_CPPFLAGS} -I\$(top_srcdir)/3rdparty -I\$(top_srcdir)/3rdparty/quesoglc"
-
+WZ_CPPFLAGS="${WZ_CPPFLAGS} -I\$(top_srcdir)/3rdparty"
 
 AC_SUBST([WZ_CPPFLAGS], [${WZ_CPPFLAGS}])
 AC_SUBST([WZ_CFLAGS], [${WZ_CFLAGS}])
@@ -480,7 +482,6 @@
 		win32/Makefile
 		tests/Makefile
 		3rdparty/miniupnpc/Makefile
-		3rdparty/quesoglc/Makefile
 		lib/framework/Makefile
 		lib/exceptionhandler/Makefile
 		lib/gamelib/Makefile
Index: warzone2100-3.1.5/Makefile.am
===================================================================
--- warzone2100-3.1.5.orig/Makefile.am	2016-06-22 00:00:56.000047391 +0200
+++ warzone2100-3.1.5/Makefile.am	2016-07-02 21:46:55.049681405 +0200
@@ -7,7 +7,6 @@
 SUBDIRS = \
 	win32 \
 	3rdparty/miniupnpc \
-	3rdparty/quesoglc \
 	lib/framework \
 	lib/exceptionhandler \
 	lib/script \
Index: warzone2100-3.1.5/src/Makefile.am
===================================================================
--- warzone2100-3.1.5.orig/src/Makefile.am	2016-06-22 00:00:56.000047391 +0200
+++ warzone2100-3.1.5/src/Makefile.am	2016-07-02 21:55:55.314387240 +0200
@@ -1,4 +1,4 @@
-AM_CPPFLAGS = -DYY_NO_INPUT $(SDL_CFLAGS) $(PHYSFS_CFLAGS) $(PNG_CFLAGS) $(VORBISFILE_CFLAGS) $(VORBIS_CFLAGS) $(OPENAL_CFLAGS) $(OPENGLC_CFLAGS) $(OPENGL_CFLAGS) $(WZ_CPPFLAGS) $(GLEW_CFLAGS)
+AM_CPPFLAGS = -DYY_NO_INPUT $(SDL_CFLAGS) $(PHYSFS_CFLAGS) $(PNG_CFLAGS) $(VORBISFILE_CFLAGS) $(VORBIS_CFLAGS) $(OPENAL_CFLAGS) $(OPENGLC_CFLAGS) $(OPENGL_CFLAGS) $(WZ_CPPFLAGS) $(GLEW_CFLAGS) $(QUESOGLC_CFLAGS)
 AM_CFLAGS = $(WZ_CFLAGS)
 AM_CXXFLAGS = $(WZ_CXXFLAGS) $(QT4_CFLAGS)
 
@@ -278,8 +278,7 @@
 	$(top_builddir)/lib/gamelib/libgamelib.a \
 	$(top_builddir)/lib/framework/libframework.a \
 	$(top_builddir)/lib/exceptionhandler/libexceptionhandler.a \
-	$(top_builddir)/3rdparty/miniupnpc/libminiupnpc.a \
-	$(top_builddir)/3rdparty/quesoglc/libquesoglc.a
+	$(top_builddir)/3rdparty/miniupnpc/libminiupnpc.a
 
 if PORTABLE
 warzone2100_portable_SOURCES = $(COMMONSOURCES) $(nodist_COMMONSOURCES)
@@ -313,6 +312,7 @@
 else
 warzone2100_LDADD = $(warzone2100_LIBS) $(LTLIBINTL) $(SDL_LIBS) $(PHYSFS_LIBS) $(PNG_LIBS) $(VORBISFILE_LIBS) $(VORBIS_LIBS) \
 	$(THEORA_LIBS) $(OPENAL_LIBS) $(OPENGLC_LIBS) $(OPENGL_LIBS) $(QT4_LIBS) $(GLEW_LIBS) \
+	$(QUESOGLC_LIBS) \
 	$(X_LIBS) $(X_EXTRA_LIBS) $(LDFLAGS)
 endif
 
